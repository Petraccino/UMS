<form #form="ngForm">
  <input type="hidden" name="id" [(ngModel)]="user.id" />
  <div class="form-group">
    <label for="name">Name</label>
    <input
      required
      #firstname="ngModel"
      pattern="[a-zA-Z\s]*"
      class="form-control"
      [placeholder]="!user.name && form.submitted ? 'Name is required' : ''"
      [(ngModel)]="user.name"
      name="name"
      id="name"
    />
    <div
      class="alert-danger small"
      *ngIf="firstname.errors && firstname.touched && firstname.dirty"
    >
      Error format
    </div>
  </div>
  <div class="form-group">
    <label for="lastname">Lastname</label>
    <input
      required
      #lastname="ngModel"
      pattern="[a-zA-Z\s]*"
      class="form-control"
      [placeholder]="
        !user.lastname && form.submitted ? 'Lastname is required' : ''
      "
      [(ngModel)]="user.lastname"
      name="lastname"
      id="lastname"
    />
    <div
      class="alert-danger small"
      *ngIf="lastname.errors && lastname.touched && lastname.dirty"
    >
      Error format
    </div>
  </div>
  <div class="form-group">
    <label for="email">Email</label>
    <input
      required
      #email="ngModel"
      pattern="[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}"
      class="form-control"
      [placeholder]="!user.email && form.submitted ? 'Email is required' : ''"
      [(ngModel)]="user.email"
      type="email"
      name="email"
      id="email"
    />
    <div
      class="alert-danger small"
      *ngIf="email.errors && email.touched && email.dirty"
    >
      Error format
    </div>
  </div>
  <div class="form-group">
    <label for="fiscalcode">Fiscalcode</label>
    <input
      required
      #fiscalcode="ngModel"
      pattern="[A-Za-z]{6}\d{2}[A-Za-z]\d{2}[A-Za-z]\d{3}[A-Za-z]"
      class="form-control"
      [placeholder]="
        !user.fiscalcode && form.submitted ? 'Fiscalcode is required' : ''
      "
      [(ngModel)]="user.fiscalcode"
      name="fiscalcode"
      id="fiscalcode"
    />
    <div
      class="alert-danger small"
      *ngIf="fiscalcode.errors && fiscalcode.touched && fiscalcode.dirty"
    >
      Error format
    </div>
  </div>
  <div class="form-group">
    <label for="province">Province</label>
    <input
      required
      #province="ngModel"
      pattern="[a-zA-Z\s]*"
      class="form-control"
      [placeholder]="
        !user.province && form.submitted ? 'Province is required' : ''
      "
      [(ngModel)]="user.province"
      name="province"
      id="province"
    />
    <div
      class="alert-danger small"
      *ngIf="province.errors && province.touched && province.dirty"
    >
      Error format
    </div>
  </div>
  <div class="form-group">
    <label for="phone">Phone</label>
    <input
      required
      #phone="ngModel"
      pattern="[0-9+() ]{7,12}"
      class="form-control"
      [placeholder]="!user.phone && form.submitted ? 'Phone is required' : ''"
      [(ngModel)]="user.phone"
      name="phone"
      id="phone"
    />
  </div>
  <div
    class="alert-danger small"
    *ngIf="phone.errors && phone.touched && phone.dirty"
  >
    Error format
  </div>
  <div class="form-group">
    <label for="age">Age</label>
    <input
      required
      class="form-control"
      [placeholder]="
        !user.age && user.age != 0 && form.submitted ? 'Age valid required' : ''
      "
      [(ngModel)]="user.age"
      type="number"
      name="age"
      id="age"
    />
    <div *ngIf="user.age == 0 && form.submitted">Age not valid</div>
    <div class="container flush--bottom">
      <div
        *ngIf="form.submitted && form.invalid"
        class="alert alert-danger small text-center"
      >
        Il form non Ã¨ valido. Controlla i campi:
        <ul>
          <li *ngFor="let control of form.controls | keyvalue">
            <div *ngIf="control.value.invalid">{{ control.key }}</div>
          </li>
        </ul>
      </div>
    </div>
  </div>
  <div class="form-group form-footer d-flex justify-content-center m-2">
    <button class="btn btn-lg btn-success w-10" (click)="saveUser()">
      <fa-icon [icon]="faFloppyDisk"></fa-icon>
    </button>
    <button class="btn btn-lg btn-info w-10" (click)="resetForm(form)">
      <fa-icon [icon]="faSlash"></fa-icon>
    </button>
    <button class="btn btn-lg btn-primary w-10" (click)="listUsers()">
      <fa-icon [icon]="faList"></fa-icon>
    </button>
  </div>
</form>
